<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SmartSocialAI</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body class="container mt-4">
  <h1 class="mb-4">SmartSocialAI â€“ Mock AI Content Manager</h1>

  <!-- Business Profile Form -->
  <form id="businessForm" class="mb-4">
    <div class="form-group">
      <label>Business Website:</label>
      <input type="text" class="form-control" id="website" placeholder="e.g. https://example.com" required>
    </div>
    <button class="btn btn-primary" type="submit">Get Business Profile</button>
  </form>

  <div id="profile" class="mb-4"></div>

  <!-- Content Generation Form -->
  <form id="contentForm" class="mb-4" style="display:none;">
    <h4>Generate Content</h4>
    <div class="form-row">
      <div class="form-group col-md-4">
        <label>Post Type</label>
        <select id="postType" class="form-control">
          <option value="Tips">Tips</option>
          <option value="Insights">Insights</option>
          <option value="Offers">Offers</option>
          <option value="Greetings">Greetings</option>
        </select>
      </div>
      <div class="form-group col-md-4">
        <label>Frequency</label>
        <input type="number" id="frequency" value="3" class="form-control">
      </div>
    </div>
    <button class="btn btn-success" type="submit">Generate Posts</button>
  </form>

  <div id="results" class="mb-4"></div>

  <!-- Industry News Form -->
  <form id="industryNewsForm" class="mb-4">
    <h4>Get Industry News</h4>
    <div class="form-group">
      <label>Industry:</label>
      <input type="text" class="form-control" id="industry" placeholder="e.g. fashion, fintech" required>
    </div>
    <button class="btn btn-primary" type="submit">Get Industry News</button>
    <div id="newsResults" class="mt-3"></div>
  </form>

  <!-- Facebook Connect Form -->
  <form id="facebookConnectForm" class="mb-4">
    <h4>Connect to Facebook</h4>
    <div class="form-group">
      <label>Facebook Page ID:</label>
      <input type="text" class="form-control" id="facebookPageId" required>
    </div>
    <button class="btn btn-primary" type="submit">Connect to Facebook</button>
    <div id="fbStatus" class="mt-2"></div>
  </form>

  <!-- Facebook Publish Form -->
  <form id="facebookPublishForm" class="mb-4">
    <h4>Publish to Facebook</h4>
    <div class="form-group">
      <label>Post ID:</label>
      <input type="text" class="form-control" id="postIdPublish" required>
    </div>
    <button class="btn btn-primary" type="submit">Publish to Facebook</button>
    <div id="publishStatus" class="mt-2"></div>
  </form>

  <!-- Schedule Post Form -->
  <form id="scheduleForm" class="mb-4">
    <h4>Schedule Posts</h4>
    <div class="form-group">
      <label>Schedule ID:</label>
      <input type="text" class="form-control" id="scheduleId" required>
    </div>
    <button class="btn btn-primary" type="submit">Schedule Posts</button>
    <div id="scheduleStatus" class="mt-2"></div>
  </form>

  <!-- Delete Post Form -->
  <form id="deletePostForm" class="mb-4">
    <h4>Delete Post</h4>
    <div class="form-group">
      <label>Post ID:</label>
      <input type="text" class="form-control" id="postIdDelete" required>
    </div>
    <button class="btn btn-danger" type="submit">Delete Post</button>
    <div id="deleteStatus" class="mt-2"></div>
  </form>

  <!-- Scripts -->
  <script>
    let businessProfile = null;

    const mockNews = [
      { "title": "AI in Marketing", "url": "https://example.com/ai1" },
      { "title": "Tech News 2025", "url": "https://example.com/tech" },
      { "title": "Automation Trends", "url": "https://example.com/auto" }
    ];

    // Business Profile Fetch
    document.getElementById("businessForm").addEventListener("submit", async e => {
      e.preventDefault();
      const website = document.getElementById("website").value;
      const res = await fetch("/api/business-profile", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ website })
      });
      businessProfile = await res.json();
      document.getElementById("profile").innerHTML = `
        <h4>Business Profile</h4>
        <pre>${JSON.stringify(businessProfile, null, 2)}</pre>
      `;
      document.getElementById("contentForm").style.display = "block";
    });

    // Content Generator
    document.getElementById("contentForm").addEventListener("submit", async e => {
      e.preventDefault();
      const postType = document.getElementById("postType").value;
      const frequency = parseInt(document.getElementById("frequency").value);
      const res = await fetch("/api/generate-posts", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          profile: businessProfile,
          news: mockNews,
          preferences: {
            tone: businessProfile.tone || "Friendly",
            type: postType,
            frequency
          }
        })
      });
      const data = await res.json();
      document.getElementById("results").innerHTML = "<h4>Generated Posts</h4>" +
        data.map(p => `<div><strong>${p.day}:</strong> ${p.caption}</div>`).join("");
    });

    // Industry News (mocked)
    document.getElementById("industryNewsForm").addEventListener("submit", e => {
      e.preventDefault();
      document.getElementById("newsResults").innerHTML = mockNews.map(n =>
        `<div><a href="${n.url}" target="_blank">${n.title}</a></div>`).join("");
    });

    // Facebook Connect
    document.getElementById("facebookConnectForm").addEventListener("submit", async e => {
      e.preventDefault();
      const pageId = document.getElementById("facebookPageId").value;
      const res = await fetch("/api/fb/connect", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ page_id: pageId })
      });
      const data = await res.json();
      document.getElementById("fbStatus").textContent = `Connected with mock token: ${data.token}`;
    });

    // Facebook Publish
    document.getElementById("facebookPublishForm").addEventListener("submit", async e => {
      e.preventDefault();
      const postId = document.getElementById("postIdPublish").value;
      const res = await fetch("/api/fb/publish", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ post_id: postId })
      });
      const data = await res.json();
      document.getElementById("publishStatus").innerHTML = `Published to: <a href="${data.url}" target="_blank">${data.url}</a>`;
    });

    // Schedule Post
    document.getElementById("scheduleForm").addEventListener("submit", e => {
      e.preventDefault();
      const id = document.getElementById("scheduleId").value;
      document.getElementById("scheduleStatus").textContent = `Scheduled post with ID: ${id}`;
    });

    // Delete Post
    document.getElementById("deletePostForm").addEventListener("submit", e => {
      e.preventDefault();
      const id = document.getElementById("postIdDelete").value;
      document.getElementById("deleteStatus").textContent = `Deleted post with ID: ${id}`;
    });
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>
